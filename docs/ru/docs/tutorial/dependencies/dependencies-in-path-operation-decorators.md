# Зависимости в декораторах операций путей

В некоторых случаях вам не нужно возвращать значение зависимости внутрь вашей *функции операции пути*.

Или сама зависимость может не возвращать значения.

Но вам все равно нужно, чтобы она была выполнена/разрешена.

Для таких случаев вместо объявления параметра в *функции операции пути* с `Depends` можно добавить `список зависимостей` в *декоратор операции пути*.

## Добавление `зависимости` в *декоратор операции пути*

*Декоратор операции пути* принимает необязательный аргумент `dependencies`.

Это должен быть `список` объектов типа `Depends()`:

=== "Python 3.9+"

    ```Python hl_lines="19"
    {!> ../../../docs_src/dependencies/tutorial006_an_py39.py!}
    ```

=== "Python 3.6+"

    ```Python hl_lines="18"
    {!> ../../../docs_src/dependencies/tutorial006_an.py!}
    ```

=== "Python 3.6 без Annotated"

    !!! tip "Подсказка"
        Предпочтительнее использовать версию с аннотацией, если это возможно.

    ```Python hl_lines="17"
    {!> ../../../docs_src/dependencies/tutorial006.py!}
    ```

Эти зависимости будут выполняться/решаться таким же образом, как и обычные зависимости. Но их значение (если они возвращают какое-либо значение) не будет передано вашей *функции операции пути*.

!!! tip "Подсказка"
    Некоторые редакторы проверяют наличие неиспользуемых параметров функции и отображают их как ошибки.

    Используя эти "зависимости" в *декораторах операций путей*, вы можете убедиться, что они выполняются, избегая ошибок редактора в котором вы работаете.

    Это также может помочь избежать путаницы для новых разработчиков, которые видят неиспользуемый параметр в вашем коде и могут подумать, что в нем нет необходимости.

!!! info "Дополнительная информация"
    В этом примере мы используем придуманные пользовательские заголовки `X-Key` и `X-Token`.

    Но в реальных случаях, при внедрении безопасности, вы получили бы больше преимуществ от использования интегрированных [утилит безопасности (следующая глава)](../security/index.md){.internal-link target=_blank}.

## Ошибки зависимостей и возвращаемые значения

Вы можете использовать те же *функции зависимостей*, что и обычно.

### Требования к зависимостям

Они могут объявлять требования к запросу (например, к заголовкам) или другим подзависимостям:

=== "Python 3.9+"

    ```Python hl_lines="8  13"
    {!> ../../../docs_src/dependencies/tutorial006_an_py39.py!}
    ```

=== "Python 3.6+"

    ```Python hl_lines="7  12"
    {!> ../../../docs_src/dependencies/tutorial006_an.py!}
    ```

=== "Python 3.6 без Annotated"

    !!! tip "Подсказка"
        Предпочтительнее использовать версию с аннотацией, если это возможно.

    ```Python hl_lines="6  11"
    {!> ../../../docs_src/dependencies/tutorial006.py!}
    ```

### Вызов исключений

Такие зависимости могут `вызывать` исключения, как и обычные зависимости:

=== "Python 3.9+"

    ```Python hl_lines="10  15"
    {!> ../../../docs_src/dependencies/tutorial006_an_py39.py!}
    ```

=== "Python 3.6+"

    ```Python hl_lines="9  14"
    {!> ../../../docs_src/dependencies/tutorial006_an.py!}
    ```

=== "Python 3.6 без Annotated"

    !!! tip "Подсказка"
        Предпочтительнее использовать версию с аннотацией, если это возможно.

    ```Python hl_lines="8  13"
    {!> ../../../docs_src/dependencies/tutorial006.py!}
    ```

### Возвращаемые значения

Они могут возвращать или не возвращать значения, в любом случае они использоваться не будут.

Таким образом, вы можете повторно использовать обычную зависимость (которая возвращает значение), уже используемую в другом месте, и даже если значение не будет использовано, зависимость будет выполнена:

=== "Python 3.9+"

    ```Python hl_lines="11  16"
    {!> ../../../docs_src/dependencies/tutorial006_an_py39.py!}
    ```

=== "Python 3.6+"

    ```Python hl_lines="10  15"
    {!> ../../../docs_src/dependencies/tutorial006_an.py!}
    ```

=== "Python 3.6 без Annotated"

    !!! tip "Подсказка"
        Предпочтительнее использовать версию с аннотацией, если это возможно.

    ```Python hl_lines="9  14"
    {!> ../../../docs_src/dependencies/tutorial006.py!}
    ```

## Зависимости для группы *операций путей*

Позже, читая о том, как структурировать большие приложения ([Большие приложения - несколько файлов](../../tutorial/bigger-applications.md){.internal-link target=_blank}), возможно, с несколькими файлами, вы узнаете, как объявить один параметр `dependencies` для группы *операций путией*.

## Глобальные зависимости

Далее мы рассмотрим, как добавить зависимости ко всему приложению `FastAPI`, чтобы они применялись к каждой *операции пути*.
